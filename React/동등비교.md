# ë¦¬ì•¡íŠ¸ì˜ ë™ë“±ë¹„êµ

> ë³¸ ê¸€ì€ **[ëª¨ë˜ ë¦¬ì•¡íŠ¸ Deep Dive]** ë¥¼ ì½ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤ğŸ˜ƒ

## ë¦¬ì•¡íŠ¸ì—ì„œì˜ ë™ë“± ë¹„êµ

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ [Object.is](https://github.com/jihyun517/TIL/blob/main/JavaScript/%EB%8F%99%EB%93%B1%EB%B9%84%EA%B5%90.md)ë¥¼ ì‚¬ìš©í•´ ë¹„êµë¥¼ ì§„í–‰í•œë‹¤. ì´ ë•Œ, Object.isëŠ” ES6ì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ë¯€ë¡œ êµ¬í˜• ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ Polyfillì„ í•¨ê»˜ ì‚¬ìš©í•œë‹¤.

[ğŸ‘‡ ë¦¬ì•¡íŠ¸ì—ì„œ ê°’ì„ ë¹„êµí•˜ëŠ” í•¨ìˆ˜ì¸ objectIs](https://github.com/facebook/react/blob/main/packages/shared/objectIs.js)

```javascript
/**
 * inlined Object.is polyfill to avoid requiring consumers ship their own
 * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is
 */
function is(x: any, y: any) {
  return (
    (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y) // eslint-disable-line no-self-compare
  );
}

const objectIs: (x: any, y: any) => boolean =
  // $FlowFixMe[method-unbinding]
  typeof Object.is === 'function' ? Object.is : is;

export default objectIs;
```

ë¦¬ì•¡íŠ¸ì—ì„œëŠ” ì´ objectIsë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ë“± ë¹„êµë¥¼ í•˜ëŠ” shallowEqualì´ë¼ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í•œë‹¤. ì´ í•¨ìˆ˜ì—ëŠ” ì˜ì¡´ì„± ë¹„êµ ë“± ë¦¬ì•¡íŠ¸ì˜ ë™ë“± ë¹„êµê°€ í•„ìš”í•œ ë‹¤ì–‘í•œ ê³³ì—ì„œ ì‚¬ìš©ëœë‹¤.

[ğŸ‘‡ ë¦¬ì•¡íŠ¸ì—ì„œ ê°’ì„ ë¹„êµí•˜ëŠ” í•¨ìˆ˜ì¸ shallowEqual](https://github.com/facebook/react/blob/main/packages/shared/shallowEqual.js)

```javascript
import is from './objectIs';
// Object.prototype.hasOwnProperty : ê°ì²´ì— íŠ¹ì • í”„ë¡œí¼í‹°ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë©”ì„œë“œ
import hasOwnProperty from './hasOwnProperty';

/**
 * Performs equality by iterating through keys on an object and returning false
 * when any key has values which are not strictly equal between the arguments.
 * Returns true when the values of all keys are strictly equal.
 * ã„´ ì£¼ì–´ì§„ ê°ì²´ì˜ í‚¤ë¥¼ ìˆœíšŒí•˜ë©° ë‘ ê°’ì´ ì—„ê²©í•œ ë™ë“±ì„±ì„ ê°€ì§€ëŠ”ì§€ í™•ì¸
 * 	 ë‹¤ë¥¸ ê°’ì´ ìˆë‹¤ë©´ false ë°˜í™˜. ë§Œì•½ ë‘ ê°ì²´ ê°„ ëª¨ë“  í‚¤ì˜ ê°’ì´ ë™ì¼í•˜ë‹¤ë©´ true ë°˜í™˜.
 */
function shallowEqual(objA: mixed, objB: mixed): boolean {
  if (is(objA, objB)) {
    return true;
  }

  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {
    return false;
  }

  // ê° í‚¤ì˜ ë°°ì—´ì„ êº¼ë‚¸ë‹¤
  const keysA = Object.keys(objA);
  const keysB = Object.keys(objB);

  // ë°°ì—´ì˜ ê¸¸ì´ê°€ ë‹¤ë¥´ë‹¤ë©´ fasle
  if (keysA.length !== keysB.length) {
    return false;
  }

  // Test for A's keys different from B.
  // Aì˜ í‚¤ë¥¼ ê¸°ì¤€ìœ¼ë¡œ, Bì— ê°™ì€ í‚¤ê°€ ìˆëŠ”ì§€, ê·¸ë¦¬ê³  ê·¸ ê°’ì´ ê°™ì€ì§€ í™•ì¸
  for (let i = 0; i < keysA.length; i++) {
    const currentKey = keysA[i];
    if (
      !hasOwnProperty.call(objB, currentKey) ||
      // $FlowFixMe[incompatible-use] lost refinement of `objB`
      !is(objA[currentKey], objB[currentKey])
    ) {
      return false;
    }
  }

  return true;
}

export default shallowEqual;
```

> ë¦¬ì•¡íŠ¸ì—ì„œì˜ ë¹„êµë¥¼ ìš”ì•½í•˜ë©´, Object.isë¡œ ë¨¼ì € ë¹„êµë¥¼ ìˆ˜í–‰í•œ í›„, Object.isì—ì„œ ìˆ˜í–‰í•˜ì§€ ëª»í•œ ê°ì²´ ê°„ ì–•ì€ ë¹„êµë¥¼ í•œ ë²ˆ ë” ìˆ˜í–‰í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.
> **ê°ì²´ ê°„ ì–•ì€ ë¹„êµë€ ? ê°ì²´ì˜ ì²« ë²ˆì§¸ ê¹Šì´ì— ì¡´ì¬í•˜ëŠ” ê°’ë§Œ ë¹„êµí•œë‹¤ëŠ” ê²ƒ**

**ê°ì²´ì˜ ì–•ì€ ë¹„êµê¹Œì§€ë§Œ êµ¬í˜„í•œ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œ? **

ë¦¬ì•¡íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” JSX propsëŠ” ê°ì²´ì´ë©°, propsì—ì„œ êº¼ë‚´ì˜¨ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ë Œë”ë§ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì¼ë°˜ì ì¸ ì¼€ì´ìŠ¤ì—ì„œëŠ” ì–•ì€ ë¹„êµë¡œë„ ì¶©ë¶„í•˜ê¸° ë•Œë¬¸.

<br>

## ì •ë¦¬

> ë¦¬ì•¡íŠ¸ì˜ ë™ë“± ë¹„êµë¥¼ ë¶„ì„í•œ í˜„ ì‹œì , propsê°€ ê¹Šì–´ì§ˆ ê²½ìš° ë¦¬ì•¡íŠ¸ ë Œë”ë§ì´ ì˜ˆìƒì¹˜ ëª»í•˜ê²Œ ì‘ë™í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤!
> ë¦¬ì•¡íŠ¸ ë‚´ë¶€ì˜ ë¡œì§ì„ ê¼¼ê¼¼íˆ ì‚´í´ë³´ë‹ˆ ë™ì‘ ì›ë¦¬ë¥¼ í™•ì‹¤í•˜ê²Œ ì•Œê²Œ ë˜ì–´ì„œ ë„ˆë¬´ ì‹ ê¸°í•˜ê³  ìœ ìµí•œ ê²½í—˜ì´ì—ˆë‹¤.
> í›…ì˜ ì˜ì¡´ì„± ë°°ì—´ì˜ ë¹„êµ, useMemoì™€ useCallbackì˜ í•„ìš”ì„± ë° ë Œë”ë§ ìµœì í™”ë¥¼ ìœ„í•´ì„œ ê¼­ í•„ìš”í•œ React.memoë¥¼ ìœ„í•´ ê³ ë ¤í•´ì•¼ í•  ê²ƒë“¤ì„ ì¢€ ë” ì‰½ê²Œ ì´í•´í•˜ê²Œ ëœ ê²ƒ ê°™ë‹¤.
